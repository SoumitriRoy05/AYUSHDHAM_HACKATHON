<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Welcome - Ayurvedic Treatment Center</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link href='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css' rel='stylesheet' />
  <script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js'></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    :root {
      --primary-color: #dcedc8;
      --secondary-color: #a5d6a7;
      --accent-color: #2e7d32;
      --card-color: #ffffff;
      --text-color: #0c0c0c;
    }

    body {
      margin:0;
      font-family:'Segoe UI',sans-serif;
      background-color:#f5fff5;
    }

    /* Sidebar */
    .sidebar {width:220px;height:100vh;background:linear-gradient(180deg,#2e7d32,#4caf50);color:#030303;position:fixed;padding:20px 10px;box-shadow:2px 0 8px rgba(0,0,0,0.15);}
    .sidebar h2{text-align:center;margin-bottom:30px;color:white;}
    .sidebar a{display:block;color:white;text-decoration:none;padding:12px;margin:8px 0;border-radius:8px;transition:0.3s;}
    .sidebar a:hover{background:rgba(255,255,255,0.2);}

    /* Main */
    .main{margin-left:240px;padding:20px;}

    /* Topbar */
    .topbar{display:flex;justify-content:flex-end;align-items:center;margin-bottom:20px;padding:10px 20px;background:#e8f5e9;border-radius:12px;box-shadow:0 4px 10px rgba(0,0,0,0.08);}
    .notifications{position:relative;cursor:pointer;}
    .notifications i{font-size:22px;color:#2e7d32;transition:0.3s;}
    .notifications i:hover{transform:scale(1.1);}
    .badge{position:absolute;top:-6px;right:-8px;background:red;color:white;font-size:12px;padding:3px 6px;border-radius:50%;}
    .dropdown{display:none;position:absolute;right:0;top:35px;width:280px;background:white;border-radius:12px;box-shadow:0 6px 12px rgba(0,0,0,0.15);padding:12px;z-index:100;}
    .dropdown p{margin:8px 0;padding:10px;background:#f1f8e9;border-radius:8px;color:#2e7d32;font-size:14px;transition:0.3s;}
    .dropdown p:hover{background:#c8e6c9;}
    .show{display:block !important;}

    /* Banner */
    .welcome-banner{background:linear-gradient(135deg,#4caf50,#81c784);color:#0c0c0c;border-radius:20px;padding:40px;text-align:center;margin-bottom:20px;box-shadow:0 4px 12px rgba(0,0,0,0.2);}
    .welcome-banner h1{font-size:30px;margin-bottom:10px;}
    .btn{background:#a3df88;color:#2e7d32;padding:12px 24px;border:none;border-radius:25px;cursor:pointer;margin-top:15px;font-weight:bold;transition:0.3s;}
    .btn:hover{background:#e8f5e9;transform:scale(1.05);}

    /* Quick Actions */
    .quick-actions{display:flex;gap:15px;justify-content:center;margin-bottom:30px;}
    .quick-actions .btn{flex:1;padding:12px;font-size:16px;}

    /* Stats Cards */
    .cards{display:grid;grid-template-columns:repeat(3,1fr);gap:20px;margin-bottom:30px;}
    .card{background:white;padding:25px;border-radius:16px;box-shadow:0 6px 12px rgba(0,0,0,0.08);text-align:center;transition:0.3s;}
    .card:hover{transform:translateY(-5px);box-shadow:0 10px 18px rgba(0,0,0,0.15);}
    .card h3{margin:10px 0;color:#2e7d32;}

    /* Charts + Calendar */
    .charts{display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:30px;}
    .chart-container{background:white;border-radius:20px;padding:20px;box-shadow:0 6px 12px rgba(0,0,0,0.1);}
    #calendar{max-width:100%;margin:auto;}

    /* Facilities */
    .facilities{background:white;padding:20px;border-radius:20px;box-shadow:0 6px 12px rgba(0,0,0,0.1);margin-bottom:30px;}
    .facilities h3{color:#2e7d32;}
    .facility-images{display:flex;gap:20px;margin-top:15px;}
    .facility-images img{width:200px;height:130px;border-radius:16px;object-fit:cover;transition:0.3s;}
    .facility-images img:hover{transform:scale(1.05);}

    /* Reviews */
    .reviews{background:white;padding:25px;border-radius:20px;box-shadow:0 6px 12px rgba(0,0,0,0.1);text-align:center;margin-bottom:30px;}
    .review{display:none;font-style:italic;color:#444;}
    .review.active{display:block;animation:fadeIn 1s ease-in;}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    .review strong{color:#2e7d32;}

    /* Quote */
    .quote{margin-top:20px;background:#e8f5e9;padding:15px;border-radius:16px;font-style:italic;text-align:center;color:#2e7d32;box-shadow:0 4px 10px rgba(0,0,0,0.08);}

    /* Upcoming Appointments */
    .appointments{background:white;padding:20px;border-radius:20px;box-shadow:0 6px 12px rgba(0,0,0,0.1);margin-bottom:30px;}
    .appointments h3{color:#2e7d32;margin-bottom:10px;}
    .appointments ul{list-style:none;padding:0;}
    .appointments li{padding:10px;background:#f1f8e9;margin-bottom:8px;border-radius:8px;}

    /* Sidebar Chatbot */
    #sidebar-chatbot {
      position: fixed;
      bottom: 20px;
      left: 20px;
      width: 300px;
      font-family: 'Segoe UI', sans-serif;
      box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      border-radius: 12px;
      overflow: hidden;
      z-index: 9999;
    }
    #chatbot-header {
      background-color: var(--accent-color);
      padding: 10px;
      font-weight: bold;
      color: white;
      text-align: center;
      cursor: pointer;
    }
    #chatbot-body {
      background-color: var(--card-color);
      max-height: 400px;
      display: none;
      flex-direction: column;
    }
    #chatbot-messages {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
    }
    .chat-message {
      margin: 8px 0;
      padding: 8px 10px;
      border-radius: 10px;
      max-width: 80%;
    }
    .chat-message.user {
      align-self: flex-end;
      background-color: var(--secondary-color);
    }
    .chat-message.bot {
      align-self: flex-start;
      background-color: var(--primary-color);
    }
    #chatbot-input-area {
      display: flex;
      border-top: 1px solid #ccc;
    }
    #chatbot-input {
      flex: 1;
      border: none;
      padding: 10px;
      outline: none;
    }
    #chatbot-send {
      background: none;
      border: none;
      padding: 10px;
      cursor: pointer;
      color: var(--text-color);
    }
  </style>
</head>
<body>
  <!-- Sidebar -->
  <div class="sidebar">
    <h2>AYUSHDHAM</h2>
    <a href="#">Dashboard</a>
    <a href="appointment_page.html">Book Appointment</a>
    <a href="#">Treatments</a>
    <a href="#">Pharmacy</a>
    <a href="#">Reports</a>
  </div>

  <!-- Main -->
  <div class="main">
    <!-- üîî Topbar -->
    <div class="topbar">
      <div class="notifications">
        <i class="fa fa-bell"></i>
        <span class="badge">3</span>
        <div class="dropdown">
          <p><strong>Welcome!</strong> Start your journey by booking your first appointment.</p>
          <p><strong>Explore:</strong> Visit our Herbal Garden & Meditation Room.</p>
          <p><strong>Tip:</strong> Consult our Ayurveda guide to know your body type (Dosha).</p>
        </div>
      </div>
    </div>

    <!-- Welcome Banner -->
    <div class="welcome-banner">
      <h1>üåø Welcome, Dear User!</h1>
      <p>Your journey to holistic healing begins here.</p>
      <button class="btn" onclick="window.location.href='appointment_page.html'">Book Your First Appointment</button>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <button class="btn" onclick="window.location.href='appointment_page.html'"><i class="fa fa-calendar-plus"></i> Book Appointment</button>
      <button class="btn"><i class="fa fa-file-medical"></i> View Reports</button>
      <button class="btn"><i class="fa fa-user-md"></i> Contact Doctor</button>
    </div>

    <!-- Stats Cards -->
    <div class="cards">
      <div class="card">
        <i class="fa fa-users fa-2x" style="color:#2e7d32;"></i>
        <h3>New Patients</h3>
        <p class="counter" data-target="120">0</p>
      </div>
      <div class="card">
        <i class="fa fa-smile-beam fa-2x" style="color:#fbc02d;"></i>
        <h3>Happy Users</h3>
        <p class="counter" data-target="1250">0</p>
      </div>
      <div class="card">
        <i class="fa fa-hand-holding-medical fa-2x" style="color:#8d6e63;"></i>
        <h3>Therapies Completed</h3>
        <p class="counter" data-target="340">0</p>
      </div>
    </div>

    <!-- Charts + Calendar -->
    <div class="charts">
      <div class="chart-container">
        <h3>üìÖ Calendar</h3>
        <div id='calendar'></div>
      </div>
      <div class="chart-container">
        <h3>Patient Growth</h3>
        <canvas id="patientChart"></canvas>
      </div>
    </div>

    <!-- Upcoming Appointments -->
    <div class="appointments">
      <h3>Upcoming Appointments</h3>
      <ul>
        <li>Rahul S. - 12 Sep, 10:00 AM</li>
        <li>Ananya P. - 12 Sep, 2:00 PM</li>
        <li>Vikram K. - 13 Sep, 11:30 AM</li>
      </ul>
    </div>

    <!-- Facilities -->
    <div class="facilities">
      <h3>Our Facilities</h3>
      <div class="facility-images">
        <img src="/image.png" alt="Herbal Garden">
        <img src="/download.jpeg" alt="Meditation Room">
        <img src="/download (1).jpeg" alt="Therapy Room">
      </div>
    </div>

    <!-- Reviews -->
    <div class="reviews">
      <h3>What Our Users Say üåü</h3>
      <div class="review active"><p>‚ÄúThe treatments here have been life-changing. Truly holistic and effective.‚Äù<br><strong>- Rahul S.</strong></p></div>
      <div class="review"><p>‚ÄúLove the facilities and the Ayurvedic approach. The meditation room is amazing!‚Äù<br><strong>- Ananya P.</strong></p></div>
      <div class="review"><p>‚ÄúFriendly staff and authentic Ayurvedic therapies. Highly recommended.‚Äù<br><strong>- Vikram K.</strong></p></div>
    </div>

    <!-- Quote -->
    <div class="quote">
      ‚ÄúWhen diet is wrong, medicine is of no use. When diet is correct, medicine is of no need.‚Äù
    </div>
  </div>

  <!-- Sidebar Chatbot -->
  <div id="sidebar-chatbot">
    <div id="chatbot-header">Ask Our AI ü§ñ</div>
    <div id="chatbot-body">
      <div id="chatbot-messages"></div>
      <div id="chatbot-input-area">
        <input type="text" id="chatbot-input" placeholder="Ask something..." />
        <button id="chatbot-send"><i class="fas fa-paper-plane"></i></button>
      </div>
    </div>
  </div>

  <script>
     // ‚úÖ Notifications Dropdown
      document.querySelector('.notifications').addEventListener('click', function(event){
        document.querySelector('.dropdown').classList.toggle('show');
        event.stopPropagation();
      });
      window.addEventListener('click', function(e){
        if(!document.querySelector('.notifications').contains(e.target)){
          document.querySelector('.dropdown').classList.remove('show');
        }
      });

      // ‚úÖ Animated Counters
      const counters = document.querySelectorAll('.counter');
      counters.forEach(counter => {
        const updateCount = () => {
          const target = +counter.getAttribute('data-target');
          const count = +counter.innerText;
          const increment = target / 100;
          if(count < target){
            counter.innerText = Math.ceil(count + increment);
            setTimeout(updateCount, 20);
          } else {
            counter.innerText = target;
          }
        };
        updateCount();
      });

      // ‚úÖ Reviews Carousel
      let reviews = document.querySelectorAll('.review');
      let index = 0;
      setInterval(()=>{
        reviews[index].classList.remove('active');
        index = (index + 1) % reviews.length;
        reviews[index].classList.add('active');
      },4000);

      // ‚úÖ Patient Growth Chart
      new Chart(document.getElementById('patientChart'), {
        type: 'line',
        data: {
          labels: ["Jan","Feb","Mar","Apr","May","Jun"],
          datasets:[{
            label:'Patients',
            data:[50,70,65,90,120,140],
            borderColor:'#2e7d32',
            backgroundColor:'rgba(76,175,80,0.2)',
            fill:true,
            tension:0.3
          }]
        }
      });

      // ‚úÖ FullCalendar
      document.addEventListener('DOMContentLoaded', function() {
        var calendarEl = document.getElementById('calendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
          initialView: 'dayGridMonth',
          themeSystem: 'standard',
          headerToolbar:{
            left:'prev,next today',
            center:'title',
            right:'dayGridMonth,timeGridWeek,listWeek'
          },
          events: [
            { title: 'Therapy Session - Rahul', start: '2025-09-12T10:00:00', color:'#81c784' },
            { title: 'Therapy Session - Ananya', start: '2025-09-12T14:00:00', color:'#a3df88' },
            { title: 'Therapy Session - Vikram', start: '2025-09-13T11:30:00', color:'#4caf50' }
          ]
        });
        calendar.render();
      });

      // ‚úÖ Chatbot Functionality
      document.getElementById("chatbot-header").addEventListener("click", () => {
        const body = document.getElementById("chatbot-body");
        body.style.display = (body.style.display === "none") ? "flex" : "none";
      });

      document.getElementById("chatbot-send").addEventListener("click", async () => {
        const input = document.getElementById("chatbot-input");
        const message = input.value.trim();
        if (!message) return;

        addChatbotMessage('user', message);
        input.value = '';

        try {
          const response = await fetch('http://localhost:3000/api/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ message })
          });

          if (!response.ok) {
            const errorData = await response.json();
            throw new Error(errorData.error || `Server responded with status: ${response.status}`);
          }

          const data = await response.json();
          addChatbotMessage('bot', data.reply);
        } catch (err) {
          console.error("Fetch error:", err);
          addChatbotMessage('bot', '‚ö† Something went wrong. Please try again.');
        }
      });

      function addChatbotMessage(sender, text) {
        const msg = document.createElement('div');
        msg.className = `chat-message ${sender}`;
        msg.textContent = text;
        const messages = document.getElementById('chatbot-messages');
        messages.appendChild(msg);
        messages.scrollTop = messages.scrollHeight;
      }
    </script>
  </body>
</html>
